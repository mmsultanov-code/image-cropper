# Используем образ Node.js
FROM node:20.12.1 as build

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /usr/src/app

# Копируем зависимости и исходный код
COPY package*.json ./
COPY . .

# Устанавливаем зависимости
RUN npm install

# Этап сборки закончен, теперь переходим к этапу запуска приложения

# Указываем начальную команду для запуска сервера разработки
CMD ["npm", "run", "serve"]

# Открываем порт 3000 (предполагается, что ваше приложение слушает этот порт)
EXPOSE 8080